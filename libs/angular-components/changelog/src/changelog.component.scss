@use 'sass:math';

// @use '@angular/flex-layout/core/sass/layout-bp' as flex-layout;

$bullet-space: 8%;
$bullet-center: math.div($bullet-space, 2);
$bullet-size: 20px;

@mixin changelog-layout($size) {
  .version {
    margin-bottom: 8px;
    position: relative;
    left: $bullet-space;
    display: inline-flex;
    align-items: baseline;

    .version-id {
      margin-right: 8px;
    }
  }

  .first-release,
  .release-detail,
  .last-release {
    @if $size == 'xs' {
      padding: 8px 16px;
      margin-right: 8px;
      width: calc(100% - #{$bullet-space} - #{8px});
    } @else {
      width: calc(100% - #{$bullet-space});
    }
  }

  .change {
    @if $size == 'xs' {
      .change-type {
        .type {
          margin: 0;
          margin-left: -(4px);
        }
      }
    }
    .change-detail {
      margin-top: 8px;
    }
  }

  .first-release::before {
    @if $size == 'xs' {
      top: -36px;
      width: 14px;
      height: 14px;
      left: calc(#{-$bullet-center} - 17px);
    } @else {
      top: -39.5px;
      width: 25px;
      height: 25px;
      left: calc(#{-$bullet-center} - 22px);
    }
  }

  .release-detail::before,
  .last-release::before {
    @if $size == 'none' {
      top: 16px;
    } @else {
      top: -30px;
    }
  }

  .first-release::after {
    @if $size == 'xs' {
      top: -(24px);
      bottom: -44px;
    } @else if $size == 'none' {
      top: 16px;
      bottom: -(24px);
    } @else {
      top: -35px;
      bottom: -35px;
    }
  }

  .release-detail::after {
    bottom: -35px;
    @if $size == 'none' {
      top: 16px;
      bottom: -48px;
    } @else {
      top: -(24px);
    }
  }
}

uxg-changelog {
  .title {
    padding: 3rem 1rem;

    .changelog-icon {
      margin-right: 16px;
      width: 120px;
      height: 120px;
    }
  }

  .changelog-container {
    margin: 48px;
    margin-left: 0;

    .version {
      min-width: 100px;
      text-align: right;
      margin-top: 32px;

      &.none {
        width: 0;
      }
    }

    .first-release,
    .release-detail,
    .last-release {
      position: relative;
      margin-left: $bullet-space;
      flex: 1 1 100%;
      cursor: unset;
      height: unset;
      margin-bottom: 24px;
      padding: 24px 48px;
      margin-right: 24px;
    }

    .category {
      padding: 8px 0;
    }

    .change {
      .change-detail {
        margin: 8px 0;
      }

      .change-type {
        min-width: 85px;

        .type {
          margin: 8px 0;
          text-align: center;
          padding: 2px 8px;
          border-radius: 16px;
          display: inline-block;
        }
      }
    }

    .first-release::before {
      content: '';
      position: absolute;
      width: $bullet-size;
      height: $bullet-size;
      top: 32px;
      left: calc(#{-$bullet-center} - #{$bullet-size});
      border-radius: 50%;
      z-index: 1;
    }

    .release-detail::before,
    .last-release::before {
      content: '';
      position: absolute;
      width: 0;
      height: 0;
      top: 32px;
      left: calc(#{-$bullet-center} - 13px);
      border-radius: 50%;
      z-index: 1;
    }

    .first-release::after {
      content: '';
      position: absolute;
      width: 2px;
      top: 32px;
      bottom: -60px;
      left: calc(#{-$bullet-center} - 6px);
    }

    .release-detail::after {
      content: '';
      position: absolute;
      width: 2px;
      top: 32px;
      bottom: -60px;
      left: calc(#{-$bullet-center} - 6px);
    }

    .layout-column {
      @include changelog-layout('sm');
    }
  }

  // @include flex-layout.layout-bp(sm) {
  //   .changelog-container {
  //     margin: 24px;
  //     @include changelog-layout('sm');
  //   }
  // }

  // @include flex-layout.layout-bp(xs) {
  //   .changelog-container {
  //     margin: 24px 8px;
  //     @include changelog-layout('xs');
  //     .version  {
  //       margin-top: 0;
  //     }
  //   }

  //   .title {
  //     padding: 2rem 1rem;

  //     .changelog-icon {
  //       width: 90px;
  //       height: 90px;
  //     }
  //   }
  // }

  // @include flex-layout.layout-bp(lt-md) {
  //   .title {
  //     .creator {
  //       max-width: 400px;
  //     }
  //   }
  // }
}
